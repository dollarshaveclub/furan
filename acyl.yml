---
version: 2

target_branches:
  - master

application:
  chart_path: '.helm/charts/furan'
  #chart_vars_repo_path: 'dollarshaveclub/helm-charts@v2:releases/kube-uw2-110/furan/dqa.yaml'
  image: '932427637498.dkr.ecr.us-west-2.amazonaws.com/furan'
  value_overrides:
    - 'createServiceAccount=true'
    - 'createRole=true'
    - 'is_dqa=true'
    - 'run_migrations=true'
    - 'app.use_dev_cert=true'

dependencies:
  direct:
    - name: postgres
      chart_repo_path: 'helm/charts@ee52835ec879e82f46141810b63a09e182c43886:stable/postgresql'
      chart_vars_repo_path: 'helm/charts@ee52835ec879e82f46141810b63a09e182c43886:stable/postgresql/values.yaml'
      value_overrides:
        - "image.tag=11"
        - "postgresqlPassword=root"
        - "postgresqlDatabase=furan"
        - "persistence.enabled=false"
        - "fullnameOverride=postgresql"
    - name: vault
      chart_repo_path: 'dollarshaveclub/vault-dev-docker@master:.helm/charts/vault'
      chart_repo_vars_path: 'dollarshaveclub/vault-dev-docker@master:.helm/charts/vault/values.yaml'
      value_overrides:
        - 'image.pullPolicy=Always'
        - 'secrets.github/token=asdf'
        - 'secrets.quay/token=asdf'
        - 'secrets.aws/access_key_id=asdf'
        - 'secrets.aws/secret_access_key=asdf'
        - 'secrets.db/uri=postgresql://postgres:root@postgresql:5432/furan?sslmode=disable'
        - 'secrets.db/credential_encryption_key=few4vbLeR13ykH1orWVowfUsGNiv2cXx'